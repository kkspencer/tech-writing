<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Kelvin Spencer"><link rel="shortcut icon" href=/images/logo.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.2.2"><title>Cuelang - Tech Writing</title><link rel=stylesheet href=../assets/stylesheets/main.a2408e81.min.css><link rel=stylesheet href=../assets/stylesheets/palette.a46bcfb3.min.css><meta name=theme-color content><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback"><style>body,input{font-family:"Ubuntu",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=manifest href=../manifest.webmanifest crossorigin=use-credentials></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=white data-md-color-accent=pink> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#the-value-lattice class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=.. title="Tech Writing" class="md-header-nav__button md-logo" aria-label="Tech Writing"> <img src=/images/logo.png alt=logo> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> Tech Writing </span> <span class="md-header-nav__topic md-ellipsis"> Cuelang </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class="md-tabs__link md-tabs__link--active"> Home </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Tech Writing" class="md-nav__button md-logo" aria-label="Tech Writing"> <img src=/images/logo.png alt=logo> </a> Tech Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. title=Home class=md-nav__link> Home </a> </li> <li class=md-nav__item> <a href=../using-go-modules/ title="Go Modules" class=md-nav__link> Go Modules </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Cuelang <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title=Cuelang class="md-nav__link md-nav__link--active"> Cuelang </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#the-value-lattice class=md-nav__link> The Value Lattice </a> <nav class=md-nav aria-label="The Value Lattice"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#values class=md-nav__link> Values </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ordering-constraints class=md-nav__link> Ordering Constraints </a> </li> <li class=md-nav__item> <a href=#enforcing-constraints class=md-nav__link> Enforcing Constraints </a> <nav class=md-nav aria-label="Enforcing Constraints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unification class=md-nav__link> Unification </a> </li> <li class=md-nav__item> <a href=#disjunction class=md-nav__link> Disjunction </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#applying-constraints-to-values class=md-nav__link> Applying Constraints to Values </a> <nav class=md-nav aria-label="Applying Constraints to Values"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unification-of-values-with-top class=md-nav__link> Unification of Values with top </a> </li> <li class=md-nav__item> <a href=#disjunctions-with-default-values class=md-nav__link> Disjunctions with default values </a> </li> <li class=md-nav__item> <a href=#combining-unifications-and-disjunctions-with-the-operator-precedence-rules class=md-nav__link> Combining unifications and disjunctions with the operator precedence rules </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#working-with-structs class=md-nav__link> Working with Structs </a> </li> <li class=md-nav__item> <a href=#working-with-references class=md-nav__link> Working with References </a> </li> <li class=md-nav__item> <a href=#authoring-cue-schemas class=md-nav__link> Authoring Cue schemas </a> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../authoring-schemas-with-avro-idl/ title="Avro IDL" class=md-nav__link> Avro IDL </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#the-value-lattice class=md-nav__link> The Value Lattice </a> <nav class=md-nav aria-label="The Value Lattice"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#values class=md-nav__link> Values </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ordering-constraints class=md-nav__link> Ordering Constraints </a> </li> <li class=md-nav__item> <a href=#enforcing-constraints class=md-nav__link> Enforcing Constraints </a> <nav class=md-nav aria-label="Enforcing Constraints"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unification class=md-nav__link> Unification </a> </li> <li class=md-nav__item> <a href=#disjunction class=md-nav__link> Disjunction </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#applying-constraints-to-values class=md-nav__link> Applying Constraints to Values </a> <nav class=md-nav aria-label="Applying Constraints to Values"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unification-of-values-with-top class=md-nav__link> Unification of Values with top </a> </li> <li class=md-nav__item> <a href=#disjunctions-with-default-values class=md-nav__link> Disjunctions with default values </a> </li> <li class=md-nav__item> <a href=#combining-unifications-and-disjunctions-with-the-operator-precedence-rules class=md-nav__link> Combining unifications and disjunctions with the operator precedence rules </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#working-with-structs class=md-nav__link> Working with Structs </a> </li> <li class=md-nav__item> <a href=#working-with-references class=md-nav__link> Working with References </a> </li> <li class=md-nav__item> <a href=#authoring-cue-schemas class=md-nav__link> Authoring Cue schemas </a> </li> <li class=md-nav__item> <a href=#reference class=md-nav__link> Reference </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1>Cuelang</h1> <p><a href=https://cuelang.org/ >Cue</a> is a general-purpose, strongly-typed constraint-based language. </p> <p>In Cue, there is no distinction between <em>types</em> and <em>values</em>. Specifically, <em>types</em> are <em>values</em>.</p> <p>Further, <em>values</em> are organized around the concept of a <a href=#the-value-lattice><em>value lattice</em></a>.</p> <details class=info open=open><summary>Content</summary><ul> <li><a href=#the-value-lattice>values</a></li> <li><a href=#ordering-constraints>ordering constraints</a></li> <li><a href=#enforcing-constraints>enforcing constraints</a></li> <li><a href=#applying-constraints-to-values>practice with constraints</a></li> <li><a href=#working-with-structs>working with structs</a></li> <li><a href=#working-with-references>working with references</a></li> <li><a href=#authoring-cue-schemas>authoring Cue schemas</a></li> </ul> </details> <h2 id=the-value-lattice>The Value Lattice<a class=headerlink href=#the-value-lattice title="Permanent link">&para;</a></h2> <p>A <em>value lattice</em> defines the hierarchy of <em>values</em> or <em>types</em>. By combining the relationship of <em>values</em> in the <em>value lattice</em>, with defined <a href=#ordering-constraints>precedence rules</a> on a set of constraint operators, Cue encourages simple constructs without sacrificing formal rigor.</p> <p>The <em>value lattice</em> is a partially ordered set, in which every two elements have a unique least upper bound, and a greatest lower bound.</p> <p><img alt src=../images/cue-types.png></p> <p>For every two elements, there is a unique instance of both elements that subsumes all other elements that are an instance of both elements.</p> <p>For example <code>42.0</code> is an instance of a <code>float</code>, and <code>7</code> is an instance of an <code>int</code>. Both <code>42.0</code> and <code>7</code> are instances of a <code>number</code></p> <p>The <em>value lattice</em> allows for constraints to be enforced, based on the relationship of <em>values</em> within the lattice.</p> <p>At the top of the <em>value lattice</em> is a single ancestor of all values, called <em>top</em>. It is denoted by <code>_</code>. Every <em>value</em> in the lattice is an instance of <em>top</em>.</p> <p>At the bottom of the <em>value lattice</em> is a single leaf, called <em>bottom</em>. It is denoted by <code>_|_</code>. A <em>bottom</em> value usually indicates an error.</p> <h3 id=values>Values<a class=headerlink href=#values title="Permanent link">&para;</a></h3> <p>Beyond simple values such as <code>7</code>, <code>42.0</code>, <code>"hello"</code>, Cue provides <em>structs</em> for building complex values. In Cue, <code>structs</code> are simply a mapping of labels to values. It is a set of elements (called <em>fields</em>), each of which has a name (called <em>label</em>), and a value</p> <p>The unique <code>struct</code>, with no field, <code>{}</code> is an instance of every struct. The fields in a <code>struct</code> may be required or optional.</p> <div class=tabbed-set data-tabs=1:1><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Example Cue Struct</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=p>{</span>
    <span class=err>a:</span> <span class=err>7,</span> 
    <span class=err>b:42.0,</span> 
    <span class=err>c:</span> <span class=nt>&quot;hello&quot;</span>
<span class=p>}</span>
</code></pre></div> </div> </div> <p><strong>Atomic Values</strong></p> <p>Within the <em>value lattice</em>, an <em>atom</em> is any <em>value</em> whose only instances are itself and <em>bottom</em>, such as <code>null</code>, <code>true</code>, <code>42.0</code></p> <p><strong>Concrete Values</strong></p> <p>In Cue, a value is <em>concrete</em> if it is either an <em>atom</em>, or a <code>struct</code> whose field values recursively evaluate to <em>concrete</em> values.</p> <p><strong>Null Value</strong></p> <p>The null value is represented with the keyword <code>null</code>. It has only one parent <code>top</code>, and one child <code>bottom</code>.</p> <p><strong>Boolean Value</strong></p> <p>The boolean value represents the set of Boolean truth values denoted by the keywords <code>true</code> and <code>false</code>.</p> <p><strong>Numeric Values</strong></p> <p><code>int</code> and <code>float</code> values are distinct instances of the generic <code>number</code> value in Cue. <code>int</code> represents the set of all integer numbers. <code>float</code> represents the set of all decimal floating-point numbers.</p> <h2 id=ordering-constraints>Ordering Constraints<a class=headerlink href=#ordering-constraints title="Permanent link">&para;</a></h2> <p>While the <em>value lattice</em> provides a hierarchy for defining the relationship between <em>values</em>, the precedence rules on constraint operators define the order in which constraints are applied to <em>values</em> within the <em>value lattice</em>.</p> <div class=tabbed-set data-tabs=2:1><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>Order of constraint operators in increasing precedence</label><div class=tabbed-content></div> </div> <ul> <li><code>|</code> =&gt; alternation</li> <li><code>()</code> =&gt; grouping</li> <li><code>[]</code> =&gt; option (0 or once)</li> <li><code>{}</code> =&gt; repetition (0 to n times)</li> </ul> <h2 id=enforcing-constraints>Enforcing Constraints<a class=headerlink href=#enforcing-constraints title="Permanent link">&para;</a></h2> <p>Given a <em>value lattice</em> which defines the relationship between <em>values</em> and a set of precedence rules for constraint operators, Cue employs two mechanisms to enforce constraints.</p> <h3 id=unification>Unification<a class=headerlink href=#unification title="Permanent link">&para;</a></h3> <div class=tabbed-set data-tabs=3:1><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><label for=__tabbed_3_1>Unification</label><div class=tabbed-content> <p>The <strong>unification</strong> of <em>values</em> <code>a</code> and <code>b</code> is defined as the greatest lower bound of <code>a</code> and <code>b</code> within the <em>value lattice</em>. Since Cue <em>values</em> form a lattice, the unification of two Cue <em>values</em> is always unique:</p> <div class=highlight><pre><span></span><code><span class=err>a</span> <span class=err>&amp;</span> <span class=err>a</span> <span class=err>=</span> <span class=err>a</span>
<span class=err>a</span> <span class=err>&amp;</span> <span class=err>b</span> <span class=err>=</span> <span class=err>a</span>  <span class=err>//where</span> <span class=err>a</span> <span class=err>is</span> <span class=err>an</span> <span class=err>instance</span> <span class=err>of</span> <span class=err>b</span>
<span class=err>a</span> <span class=err>&amp;</span> <span class=err>_|_</span> <span class=err>=</span> <span class=err>_|_</span>  <span class=err>//the</span> <span class=err>unification</span> <span class=err>of</span> <span class=err>any</span> <span class=err>value</span> <span class=err>with</span> <span class=err>bottom</span> <span class=err>is</span> <span class=err>always</span> <span class=err>bottom</span>
</code></pre></div> <p>Unifications are:</p> <ul> <li><em>commutative</em><sup id=fnref3:1><a class=footnote-ref href=#fn:1>1</a></sup> (changing the order of the operands does not change the results)</li> <li><em>associative</em><sup id=fnref3:2><a class=footnote-ref href=#fn:2>2</a></sup> (the order in which the operations are performed does not matter as long as the sequence of the operands is not changed). </li> </ul> <p>Thus, the order of evaluation is irrelevant.</p> </div> </div> <h3 id=disjunction>Disjunction<a class=headerlink href=#disjunction title="Permanent link">&para;</a></h3> <div class=tabbed-set data-tabs=4:1><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><label for=__tabbed_4_1>Disjunction</label><div class=tabbed-content> <p>The <strong>disjunction</strong> of <em>values</em> <code>a</code> and <code>b</code> is defined as the least upper bound of <code>a</code> and <code>b</code> within the <em>value lattice</em>. Since Cue <em>values</em> form a lattice, the disjunction of two Cue <em>values</em> is always unique:</p> <div class=highlight><pre><span></span><code><span class=err>a</span> <span class=err>|</span> <span class=err>a</span> <span class=err>=</span> <span class=err>a</span>
<span class=err>a</span> <span class=err>|</span> <span class=err>b</span> <span class=err>=</span> <span class=err>b</span> <span class=err>//where</span> <span class=err>a</span> <span class=err>is</span> <span class=err>an</span> <span class=err>instance</span> <span class=err>of</span> <span class=err>b</span>
<span class=err>a</span> <span class=err>|</span> <span class=err>_|_</span> <span class=err>=</span> <span class=err>a</span> <span class=err>//the</span> <span class=err>disjunction</span> <span class=err>of</span> <span class=err>any</span> <span class=err>value</span> <span class=err>with</span> <span class=err>bottom</span> <span class=err>is</span> <span class=err>always</span> <span class=err>that</span> <span class=err>value</span>
<span class=err>_|_</span> <span class=err>|</span> <span class=err>_|_</span> <span class=err>=</span> <span class=err>_|_</span> <span class=err>//the</span> <span class=err>disjunction</span> <span class=err>of</span> <span class=err>two</span> <span class=err>bottom</span> <span class=err>values</span> <span class=err>is</span> <span class=err>bottom</span>
</code></pre></div> <p>Disjunctions are:</p> <ul> <li><em>commutative</em><sup id=fnref2:1><a class=footnote-ref href=#fn:1>1</a></sup>(changing the order of the operands does not change the results) </li> <li><em>associative</em><sup id=fnref2:2><a class=footnote-ref href=#fn:2>2</a></sup>(the order in which the operations are performed does not matter as long as the sequence of the operands is not changed)</li> <li><em>idempotent</em><sup id=fnref:3><a class=footnote-ref href=#fn:3>3</a></sup>(can be applied multiple times without changing the result beyond the initial application)</li> </ul> <p>A disjunction is normalized if there is no element <code>a</code> for which there is an element <code>b</code> such that <code>a</code> is an instance of <code>b</code></p> </div> </div> <h2 id=applying-constraints-to-values>Applying Constraints to Values<a class=headerlink href=#applying-constraints-to-values title="Permanent link">&para;</a></h2> <p>Remember that the <em>value lattice</em> is a partially ordered set, in which every two elements have a <strong>unique least upper bound</strong>, and a <strong>greatest lower bound</strong>.</p> <p><img alt src=../images/cue-value-lattice.png></p> <blockquote> <p>For every two elements there is a unique instance of both elements that subsumes all other elements that are an instance of both elements</p> </blockquote> <h3 id=unification-of-values-with-top>Unification of Values with <em>top</em><a class=headerlink href=#unification-of-values-with-top title="Permanent link">&para;</a></h3> <p>Unifying any value <code>v</code> with top <code>_</code> results in <code>v</code> itself</p> <div class=tabbed-set data-tabs=5:2><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><label for=__tabbed_5_1>Expression</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=err>_</span> <span class=err>&amp;</span>  <span class=mi>5</span>       
<span class=err>_</span> <span class=err>&amp;</span>  <span class=err>_</span>       
<span class=err>_</span> <span class=err>&amp;</span> <span class=err>_|_</span>      
</code></pre></div> </div> <input id=__tabbed_5_2 name=__tabbed_5 type=radio><label for=__tabbed_5_2>Result</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=mi>5</span>
<span class=err>_</span>
<span class=err>_|_</span>
</code></pre></div> </div> </div> <h3 id=disjunctions-with-default-values>Disjunctions with default values<a class=headerlink href=#disjunctions-with-default-values title="Permanent link">&para;</a></h3> <p>Any element of a disjunction can be marked as a default by prefixing it with an asterisk <code>*</code>. Consequently, when an expression needs to be resolved for an operation other than unification or disjunction, non-starred elements are dropped in favor of starred ones, if the starred elements do not resolve to <em>bottom</em>.</p> <div class=tabbed-set data-tabs=6:2><input checked=checked id=__tabbed_6_1 name=__tabbed_6 type=radio><label for=__tabbed_6_1>Expression</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=s2>&quot;tcp&quot;</span> <span class=err>|</span> <span class=s2>&quot;udp&quot;</span>
<span class=err>*</span><span class=s2>&quot;tcp&quot;</span> <span class=err>|</span> <span class=s2>&quot;udp&quot;</span>
<span class=err>float</span> <span class=err>|</span> <span class=err>*</span><span class=mi>1</span>
<span class=err>*string</span> <span class=err>|</span> <span class=mf>1.0</span>
</code></pre></div> </div> <input id=__tabbed_6_2 name=__tabbed_6 type=radio><label for=__tabbed_6_2>Result</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=s2>&quot;tcp&quot;</span> <span class=err>|</span> <span class=s2>&quot;udp&quot;</span>
<span class=s2>&quot;tcp&quot;</span>
<span class=mi>1</span>
<span class=err>string</span>
</code></pre></div> </div> </div> <h3 id=combining-unifications-and-disjunctions-with-the-operator-precedence-rules>Combining unifications and disjunctions with the operator precedence rules<a class=headerlink href=#combining-unifications-and-disjunctions-with-the-operator-precedence-rules title="Permanent link">&para;</a></h3> <details class=info open=open><summary>Order of constraint operators in increasing precedence</summary><ul> <li><code>|</code> =&gt; alternation</li> <li><code>()</code> =&gt; grouping</li> <li><code>[]</code> =&gt; option (0 or once)</li> <li><code>{}</code> =&gt; repetition (0 to n times)</li> </ul> </details> <div class=tabbed-set data-tabs=7:2><input checked=checked id=__tabbed_7_1 name=__tabbed_7 type=radio><label for=__tabbed_7_1>Expression</label><div class=tabbed-content> <p><code>({a:1} | {b:2}) &amp; {c:3}</code></p> </div> <input id=__tabbed_7_2 name=__tabbed_7 type=radio><label for=__tabbed_7_2>Result</label><div class=tabbed-content> <p><code>{a:1, c:3} | {b:2, c:3}</code></p> </div> </div> <div class="admonition tip"> <p class=admonition-title>Unification is commutative<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup> and associative<sup id=fnref:2><a class=footnote-ref href=#fn:2>2</a></sup></p> </div> <div class=tabbed-set data-tabs=8:2><input checked=checked id=__tabbed_8_1 name=__tabbed_8 type=radio><label for=__tabbed_8_1>Expression</label><div class=tabbed-content> <p><code>(int | string) &amp; "foo"</code></p> </div> <input id=__tabbed_8_2 name=__tabbed_8 type=radio><label for=__tabbed_8_2>Result</label><div class=tabbed-content> <p><code>"foo"</code> // greatest lower bound</p> </div> </div> <div class=tabbed-set data-tabs=9:2><input checked=checked id=__tabbed_9_1 name=__tabbed_9 type=radio><label for=__tabbed_9_1>Expression</label><div class=tabbed-content> <p><code>"tcp" | "udp"</code></p> </div> <input id=__tabbed_9_2 name=__tabbed_9 type=radio><label for=__tabbed_9_2>Result</label><div class=tabbed-content> <p><code>"tcp" | "udp"</code> // disjunction with no default values</p> </div> </div> <div class=tabbed-set data-tabs=10:2><input checked=checked id=__tabbed_10_1 name=__tabbed_10 type=radio><label for=__tabbed_10_1>Expression</label><div class=tabbed-content> <ul> <li><code>*"tcp" | "udp"</code></li> <li><code>(*"tcp"|"udp") &amp; ("udp"|*"tcp"</code></li> <li><code>(*"tcp"|"udp") &amp; ("udp"|"tcp")</code></li> <li><code>(*"tcp"|"udp") &amp; "tcp"</code></li> </ul> </div> <input id=__tabbed_10_2 name=__tabbed_10 type=radio><label for=__tabbed_10_2>Result</label><div class=tabbed-content> <p><code>"tcp"</code> // default value and greatest lower bound</p> </div> </div> <div class=tabbed-set data-tabs=11:2><input checked=checked id=__tabbed_11_1 name=__tabbed_11 type=radio><label for=__tabbed_11_1>Expression</label><div class=tabbed-content> <p><code>(*true | false) &amp; bool</code></p> </div> <input id=__tabbed_11_2 name=__tabbed_11 type=radio><label for=__tabbed_11_2>Result</label><div class=tabbed-content> <p><code>true</code> // default value and greatest lower bound</p> </div> </div> <h2 id=working-with-structs>Working with Structs<a class=headerlink href=#working-with-structs title="Permanent link">&para;</a></h2> <p>Because a <code>struct</code> is a set of elements (<em>fields</em>), each of which has a name (<em>label</em>), and a value, operations on <code>structs</code> are analogous to basic set operations.</p> <p>The unique <code>struct</code> (<code>{}</code>), with no field is an instance of every struct, just as the empty set is an instance of every set.</p> <p>Further, the fields in a <code>struct</code> may be required or optional.</p> <p>Given a <a href=#the-value-lattice><em>value lattice</em></a>, a set of <a href=#ordering-constraints><em>ordering constraints</em></a> and the list of comparison operators below:</p> <div class=highlight><pre><span></span><code>==    equal
!=    not equal
&lt;     less
&lt;=    less or equal
&gt;     greater
&gt;=    greater or equal
=~    matches regular expression
!~    does not match regular expression
</code></pre></div> <p>we can succinctly define the constraints to apply to set of values.</p> <div class=tabbed-set data-tabs=12:2><input checked=checked id=__tabbed_12_1 name=__tabbed_12 type=radio><label for=__tabbed_12_1>Expression</label><div class=tabbed-content> <p><code>{a: &gt;=1 &amp; &lt;=7} &amp; {a: &gt;=5 &amp; &lt;=9}</code> </p> <p>which represents the concrete set operation</p> <p><code>{1,2,3,4,5,6,7} &amp; {5,6,7,8,9}</code></p> </div> <input id=__tabbed_12_2 name=__tabbed_12 type=radio><label for=__tabbed_12_2>Result</label><div class=tabbed-content> <p><code>{a: &gt;=5 &amp; &lt;=7}</code> </p> <p>which represents the concrete set</p> <p><code>{5,6,7}</code></p> </div> </div> <div class=tabbed-set data-tabs=13:2><input checked=checked id=__tabbed_13_1 name=__tabbed_13 type=radio><label for=__tabbed_13_1>Expression</label><div class=tabbed-content> <p><code>{a: 1} &amp; {a: 2}</code></p> </div> <input id=__tabbed_13_2 name=__tabbed_13 type=radio><label for=__tabbed_13_2>Result</label><div class=tabbed-content> <p><code>_|_</code> </p> <p>which represents the greatest lower bound from unification</p> </div> </div> <p>For structs with optional fields, optional labels are defined with an expression to select all labels for which a given constraint should be applied.</p> <p>For example:</p> <blockquote> <p><code>["foo"]: bar</code> where the square brackets holds a set of expressions to indicate the matching labels of an optional field</p> </blockquote> <p>In Cue, we use the syntactic shorthand <code>?</code> to indicate optional labels</p> <blockquote> <p><code>foo?: bar</code></p> </blockquote> <details class=info open=open><summary>Declaring struct fields</summary><p><code>struct</code> fields can be declared as either:</p> <ul> <li><em>regular</em> (using <code>:</code>) or </li> <li><em>definition</em> (using <code>::</code>)</li> </ul> <p>Whereas <em>regular</em> fields are required to be concrete when emitting data, <em>definitions</em> are not required to be concrete since they are not emitted as part of the model.</p> </details> <div class=tabbed-set data-tabs=14:1><input checked=checked id=__tabbed_14_1 name=__tabbed_14 type=radio><label for=__tabbed_14_1>Example: struct with optional field</label><div class=tabbed-content> <p>Given the definition:</p> <div class=highlight><pre><span></span><code><span class=err>nameMap:</span> <span class=p>[</span><span class=err>string</span><span class=p>]</span><span class=err>:</span> <span class=p>{</span> <span class=err>//</span> <span class=err>optional</span> <span class=err>field</span> <span class=err>label</span>
    <span class=err>firstName:</span> <span class=err>string</span>
    <span class=err>nickName:</span>  <span class=err>*firstName</span> <span class=err>|</span> <span class=err>string</span> <span class=err>//</span> <span class=err>default</span> <span class=err>to</span> <span class=err>the</span> <span class=err>resolved</span> <span class=err>firstName</span>
<span class=p>}</span>
</code></pre></div> <p><code>nameMap: hank: { firstName: "Hank" }</code></p> <p>nameMap defines an optional field set <code>[string]: { ... }</code>, which in this specific case is just <code>hank</code>, and unifies the associated constraint with the matched field</p> <p>resolves to:</p> <div class=highlight><pre><span></span><code><span class=err>nameMap:</span> <span class=err>hank:</span> <span class=p>{</span>
    <span class=err>firstName:</span> <span class=nt>&quot;Hank&quot;</span>
    <span class=err>nickName</span><span class=p>:</span>  <span class=s2>&quot;Hank&quot;</span>
<span class=p>}</span>
</code></pre></div> </div> </div> <details class=info open=open><summary>structs are <em>open</em> by default</summary><p>Because <code>structs</code> are open to adding fields, instances of one struct may contain fields that are not defined in the struct.</p> <p>This makes it easy to add fields, but could also lead to bugs.</p> <p><strong>How do we resolve this?</strong></p> <p>We can close the <code>struct</code> by adding an optional field with value <code>_|_</code> for all undefined fields, or by defining the struct with the <code>close</code> keyword</p> <div class=highlight><pre><span></span><code><span class=err>A:</span> <span class=err>close(</span><span class=p>{</span>
<span class=err>field1:</span> <span class=err>string</span>
<span class=err>field2:</span> <span class=err>string</span>
<span class=p>}</span><span class=err>)</span>
</code></pre></div> <p>This makes it easy to declare instances of the <code>struct</code> where the fields can be validated (including spelling errors!)</p> <div class=highlight><pre><span></span><code><span class=err>A</span><span class=mi>1</span><span class=err>:</span> <span class=err>A</span> <span class=err>&amp;</span> <span class=p>{</span>
<span class=err>feild1:</span> <span class=err>string</span>
<span class=p>}</span> <span class=err>//</span> <span class=err>_|_</span> <span class=err>feild</span><span class=mi>1</span> <span class=err>not</span> <span class=err>defined</span> <span class=err>for</span> <span class=err>A</span>
</code></pre></div> </details> <p><strong>Working with nested structs</strong> <code>structs</code> may contain <em>fields</em> whose <em>values</em> are also <code>structs</code>. Cue provides a syntactic shorthand for defining <code>structs</code> with a <em>field</em> whose <em>value</em> is a <code>struct</code> with a single <em>field</em>.</p> <p>This may be written as a colon-separated sequence of the two <em>field</em> names, followed by a colon and the value of that single <em>field</em>.</p> <div class=tabbed-set data-tabs=15:2><input checked=checked id=__tabbed_15_1 name=__tabbed_15 type=radio><label for=__tabbed_15_1>normally defined nested struct</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=err>job:</span> <span class=p>{</span>
    <span class=err>myTask:</span> <span class=err>{</span>
        <span class=err>replicas:</span> <span class=err>2</span>
    <span class=p>}</span>
<span class=err>}</span>
</code></pre></div> </div> <input id=__tabbed_15_2 name=__tabbed_15 type=radio><label for=__tabbed_15_2>syntactic shorthand</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=err>job:</span> <span class=err>myTask:</span> <span class=err>replicas:</span> <span class=mi>2</span>
</code></pre></div> </div> </div> <h2 id=working-with-references>Working with References<a class=headerlink href=#working-with-references title="Permanent link">&para;</a></h2> <p>Cue provides a mechanism for referencing <em>fields</em> in expressions such as:</p> <div class=tabbed-set data-tabs=16:1><input checked=checked id=__tabbed_16_1 name=__tabbed_16 type=radio><label for=__tabbed_16_1>struct with a referenced field</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=err>a:</span> <span class=p>{</span>
    <span class=err>place:</span>    <span class=err>string</span>
    <span class=err>greeting:</span> <span class=nt>&quot;Hello, \(place)!&quot;</span> <span class=err>//</span> <span class=err>the</span> <span class=err>referenced</span> <span class=err>_field_</span> <span class=err>`place`</span> <span class=err>interpolated</span> <span class=err>with</span> <span class=err>the</span> <span class=err>_value_</span> <span class=err>expression</span> <span class=err>for</span> <span class=err>the</span> <span class=err>`greeting`</span> <span class=err>_field_</span>
<span class=p>}</span>
</code></pre></div> </div> </div> <div class=tabbed-set data-tabs=17:1><input checked=checked id=__tabbed_17_1 name=__tabbed_17 type=radio><label for=__tabbed_17_1>unification with a concrete value</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=err>b:</span> <span class=err>a</span> <span class=err>&amp;</span> <span class=p>{</span> <span class=err>place:</span> <span class=nt>&quot;world&quot;</span> <span class=p>}</span>
<span class=err>c:</span> <span class=err>a</span> <span class=err>&amp;</span> <span class=p>{</span> <span class=err>place:</span> <span class=nt>&quot;you&quot;</span> <span class=p>}</span>
</code></pre></div> </div> </div> <div class=tabbed-set data-tabs=18:1><input checked=checked id=__tabbed_18_1 name=__tabbed_18 type=radio><label for=__tabbed_18_1>evaluation after unification</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=err>d:</span> <span class=err>b.greeting</span>  <span class=err>//</span> <span class=s2>&quot;Hello, world!&quot;</span>
<span class=err>e:</span> <span class=err>c.greeting</span>  <span class=err>//</span> <span class=s2>&quot;Hello, you!&quot;</span>
</code></pre></div> </div> </div> <h2 id=authoring-cue-schemas>Authoring Cue schemas<a class=headerlink href=#authoring-cue-schemas title="Permanent link">&para;</a></h2> <p>Though we have barely covered a fraction of Cue and its capabilities, we now know enough to author a simple, but practical Cue schema.</p> <p>If the idea of playing around with Cue seems more appealing than authoring a schema, then check out the [Cue Language Tutorials] (https://cuelang.org/docs/tutorials/)</p> <div class=tabbed-set data-tabs=19:1><input checked=checked id=__tabbed_19_1 name=__tabbed_19 type=radio><label for=__tabbed_19_1>Example Service Deployment Schema</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=err>service:</span> <span class=p>[</span><span class=err>ID=_</span><span class=p>]</span><span class=err>:</span> <span class=p>{</span> <span class=err>//</span> <span class=err>the</span> <span class=err>service</span> <span class=err>name</span> <span class=err>is</span> <span class=err>derived</span> <span class=err>from</span> <span class=err>the</span> <span class=err>template</span> <span class=err>`[ID=_]`</span> <span class=err>which</span> <span class=err>matches</span> <span class=err>any</span> <span class=err>_value_</span> <span class=err>since</span> <span class=err>every</span> <span class=err>_value_</span> <span class=err>in</span> <span class=err>the</span> <span class=err>_value</span> <span class=err>lattice_</span> <span class=err>is</span> <span class=err>an</span> <span class=err>instance</span> <span class=err>of</span> <span class=err>_top_</span> <span class=err>(`_`)</span> 
    <span class=err>apiVersion:</span> <span class=nt>&quot;v1&quot;</span>
    <span class=err>kind</span><span class=p>:</span>       <span class=s2>&quot;Service&quot;</span>
    <span class=err>metadata</span><span class=p>:</span> <span class=p>{</span>
        <span class=err>name:</span> <span class=err>ID</span> <span class=err>//</span> <span class=err>reference</span> <span class=err>the</span> <span class=err>value</span> <span class=err>of</span> <span class=err>`ID`</span>
        <span class=err>labels:</span> <span class=err>{</span>
            <span class=err>app:</span>       <span class=err>ID</span>    <span class=err>//</span> <span class=err>reference</span> <span class=err>the</span> <span class=err>value</span> <span class=err>of</span> <span class=err>`ID`</span> <span class=err>by</span> <span class=err>convention</span>
            <span class=err>domain:</span>    <span class=nt>&quot;prod&quot;</span>  <span class=err>//</span> <span class=err>always</span> <span class=err>the</span> <span class=err>same</span> <span class=err>in</span> <span class=err>the</span> <span class=err>given</span> <span class=err>files</span>
            <span class=err>component</span><span class=p>:</span> <span class=err>string</span>  <span class=err>//</span> <span class=err>varies</span> <span class=err>per</span> <span class=err>directory</span> <span class=err>//</span> <span class=err>the</span> <span class=err>field</span> <span class=err>of</span> <span class=err>a</span> <span class=err>name</span> <span class=err>component</span> <span class=err>must</span> <span class=err>be</span> <span class=err>set</span> <span class=err>to</span> <span class=err>some</span> <span class=err>string</span> <span class=err>value</span>
        <span class=p>}</span>
    <span class=p>}</span>
    <span class=err>spec:</span> <span class=p>{</span>
        <span class=err>//</span> <span class=err>Any</span> <span class=err>port</span> <span class=err>has</span> <span class=err>the</span> <span class=err>following</span> <span class=err>properties.</span>
        <span class=err>ports:</span> <span class=err>[...{</span> <span class=err>//</span> <span class=err>the</span> <span class=err>ellipsis</span> <span class=err>defines</span> <span class=err>`ports`</span> <span class=err>as</span> <span class=err>an</span> <span class=err>open</span> <span class=err>struct</span> <span class=err>since</span> <span class=err>it</span> <span class=err>defines</span> <span class=err>_top_</span> <span class=err>(`_`)</span> <span class=err>for</span> <span class=err>all</span> <span class=err>labels.</span> <span class=err>This</span> <span class=err>means</span> <span class=err>we</span> <span class=err>can</span> <span class=err>have</span> <span class=err>1</span> <span class=err>or</span> <span class=err>more</span> <span class=err>ports</span> <span class=err>defined</span> <span class=err>here</span>
            <span class=err>port:</span>       <span class=err>int</span>
            <span class=err>protocol:</span>   <span class=err>*</span><span class=nt>&quot;TCP&quot;</span> <span class=err>|</span> <span class=s2>&quot;UDP&quot;</span>      <span class=err>//</span> <span class=err>use</span> <span class=err>the</span> <span class=err>`TCP`</span> <span class=err>protocol</span> <span class=err>by</span> <span class=err>default</span> <span class=err>if</span> <span class=err>a</span> <span class=err>protocol</span> <span class=err>is</span> <span class=err>not</span> <span class=err>defined</span>
            <span class=err>name</span><span class=p>:</span>       <span class=err>string</span> <span class=err>|</span> <span class=err>*</span><span class=s2>&quot;client&quot;</span> <span class=err>//</span> <span class=err>use</span> <span class=err>`client`</span> <span class=err>as</span> <span class=err>the</span> <span class=err>default</span> <span class=err>name</span> <span class=err>for</span> <span class=err>the</span> <span class=err>port</span> <span class=err>is</span> <span class=err>a</span> <span class=err>port</span> <span class=err>name</span> <span class=err>is</span> <span class=err>not</span> <span class=err>defined</span>
        <span class=p>}</span><span class=err>]</span>
    <span class=err>}</span>
<span class=err>}</span>
</code></pre></div> </div> </div> <div class=tabbed-set data-tabs=20:1><input checked=checked id=__tabbed_20_1 name=__tabbed_20 type=radio><label for=__tabbed_20_1>Example Service Test Schema</label><div class=tabbed-content> <div class=highlight><pre><span></span><code><span class=err>package</span> <span class=err>roundtrip</span>

<span class=err>import</span> <span class=err>(</span>
    <span class=err>avroPkg</span> <span class=s2>&quot;github.com/heetch/cue-schema/avro&quot;</span>
<span class=err>)</span>

<span class=err>tests:</span> <span class=p>[</span><span class=err>_</span><span class=p>]</span><span class=err>:</span> <span class=err>roundTripTest</span> <span class=err>//</span> <span class=err>roundTripTest</span> <span class=err>is</span> <span class=err>an</span> <span class=err>instance</span> <span class=err>of</span> <span class=err>a</span> <span class=err>service</span> <span class=err>test</span>

<span class=err>tests:</span> <span class=p>[</span><span class=err>name=_</span><span class=p>]</span><span class=err>:</span> <span class=err>testName:</span> <span class=err>name</span> <span class=err>//</span> <span class=err>the</span> <span class=err>test</span> <span class=err>name</span> <span class=err>is</span> <span class=err>derived</span> <span class=err>from</span> <span class=err>the</span> <span class=err>template</span> <span class=err>`</span><span class=p>[</span><span class=err>name=_</span><span class=p>]</span><span class=err>`</span> <span class=err>which</span> <span class=err>matches</span> <span class=err>any</span> <span class=err>_value_</span> <span class=err>since</span> <span class=err>every</span> <span class=err>_value_</span> <span class=err>in</span> <span class=err>the</span> <span class=err>_value</span> <span class=err>lattice_</span> <span class=err>is</span> <span class=err>an</span> <span class=err>instance</span> <span class=err>of</span> <span class=err>_top_</span> <span class=err>(`_`)</span>

<span class=err>roundTripTest</span> <span class=err>::</span> <span class=p>{</span> <span class=err>//</span> <span class=err>define</span> <span class=err>the</span> <span class=err>roudTripTest</span>
    <span class=err>testName:</span>    <span class=err>string</span>
    <span class=err>inSchema:</span>    <span class=err>avro.Schema</span> <span class=err>//</span> <span class=err>avro</span> <span class=err>schema</span> <span class=err>defined</span> <span class=err>in</span> <span class=err>the</span> <span class=err>avroPkg</span>
    <span class=err>outSchema?:</span>  <span class=err>avro.Schema</span> <span class=err>//</span> <span class=err>optional</span> <span class=err>output</span> <span class=err>schema</span>
    <span class=err>extraSchemas?:</span> <span class=err>[...</span> <span class=err>avro.Schema]</span> <span class=err>//</span> <span class=err>optional</span> <span class=err>field,</span> <span class=err>with</span> <span class=err>1</span> <span class=err>or</span> <span class=err>more</span> <span class=err>schemas</span>
    <span class=err>goType:</span>      <span class=err>*outSchema.name</span> <span class=err>|</span> <span class=err>string</span> <span class=err>//</span> <span class=err>default</span> <span class=err>to</span> <span class=err>the</span> <span class=err>value</span> <span class=err>of</span> <span class=err>the</span> <span class=err>`name`</span> <span class=err>field</span> <span class=err>defined</span> <span class=err>in</span> <span class=err>outSchema</span>
    <span class=err>goTypeBody?:</span> <span class=err>string</span> <span class=err>//</span> <span class=err>optional</span>
    <span class=err>//</span> <span class=err>generateError</span> <span class=err>holds</span> <span class=err>the</span> <span class=err>error</span> <span class=err>expected</span> <span class=err>from</span> <span class=err>invoking</span> <span class=err>avrogo.</span>
    <span class=err>//</span> <span class=err>If</span> <span class=err>this</span> <span class=err>is</span> <span class=err>specified,</span> <span class=err>there</span> <span class=err>will</span> <span class=err>be</span> <span class=err>no</span> <span class=err>generated</span> <span class=err>test</span> <span class=err>package.</span>
    <span class=err>generateError?:</span> <span class=err>string</span> <span class=err>//</span> <span class=err>optional</span>
    <span class=err>inData?:</span>        <span class=err>_</span> <span class=err>//</span> <span class=err>optional,</span> <span class=err>matches</span> <span class=err>any</span> <span class=err>_value_</span>
    <span class=err>outData?:</span>       <span class=err>_</span> <span class=err>//</span> <span class=err>optional,</span> <span class=err>matches</span> <span class=err>any</span> <span class=err>_value_</span>
    <span class=err>expectError?:</span> <span class=err>[errorKind]:</span> <span class=err>string</span> <span class=err>//</span> <span class=err>optional,</span> <span class=err>reference</span> <span class=err>to</span> <span class=err>the</span> <span class=err>declaration</span> <span class=err>of</span> <span class=err>`errorKind`</span> <span class=err>below,</span> <span class=err>constrained</span> <span class=err>to</span> <span class=err>a</span> <span class=err>`string`</span> <span class=err>value</span>
    <span class=err>otherTests?:</span> <span class=err>string</span> <span class=err>//</span> <span class=err>optional,</span> <span class=err>constrained</span> <span class=err>to</span> <span class=err>a</span> <span class=err>`string`</span> <span class=err>value</span>
    <span class=err>subtests:</span> <span class=err>[name=_]:</span> <span class=err>{</span> <span class=err>//the</span> <span class=err>name</span> <span class=err>of</span> <span class=err>subtests</span> <span class=err>derived</span> <span class=err>from</span> <span class=err>the</span> <span class=err>template</span> <span class=err>`[name=_]`</span> <span class=err>which</span> <span class=err>matches</span> <span class=err>any</span> <span class=err>_value_</span> <span class=err>since</span> <span class=err>every</span> <span class=err>_value_</span> <span class=err>in</span> <span class=err>the</span> <span class=err>_value</span> <span class=err>lattice_</span> <span class=err>is</span> <span class=err>an</span> <span class=err>instance</span> <span class=err>of</span> <span class=err>_top_</span> <span class=err>(`_`)</span> 
        <span class=err>testName:</span> <span class=err>name</span>
        <span class=err>inData:</span>   <span class=err>_</span> <span class=err>//</span> <span class=err>matches</span> <span class=err>any</span> <span class=err>_value_</span>
        <span class=err>outData:</span>  <span class=err>_</span> <span class=err>//</span> <span class=err>matches</span> <span class=err>any</span> <span class=err>_value_</span>
        <span class=err>expectError?:</span> <span class=err>[errorKind]:</span> <span class=err>string</span> <span class=err>//</span> <span class=err>optional,</span> <span class=err>reference</span> <span class=err>to</span> <span class=err>the</span> <span class=err>declaration</span> <span class=err>of</span> <span class=err>`errorKind`</span> <span class=err>below,</span> <span class=err>constrained</span> <span class=err>to</span> <span class=err>a</span> <span class=err>`string`</span> <span class=err>value</span>
    <span class=p>}</span>
    <span class=err>if</span> <span class=err>inData</span> <span class=err>!=</span> <span class=err>_|_</span> <span class=p>{</span> <span class=err>//</span> <span class=err>ensure</span> <span class=err>the</span> <span class=err>input</span> <span class=err>data</span> <span class=err>is</span> <span class=err>valid</span> <span class=err>(not</span> <span class=err>an</span> <span class=err>error</span> <span class=err>value)</span>
        <span class=err>subtests:</span> <span class=err>main:</span> <span class=err>{</span>
            <span class=nt>&quot;inData&quot;</span><span class=p>:</span>  <span class=err>inData</span>
            <span class=s2>&quot;outData&quot;</span><span class=p>:</span> <span class=err>outData</span>
            <span class=err>if</span> <span class=err>expectError</span> <span class=err>!=</span> <span class=err>_|_</span> <span class=p>{</span>
                <span class=nt>&quot;expectError&quot;</span><span class=p>:</span> <span class=err>expectError</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=err>}</span>
<span class=err>}</span>

<span class=err>errorKind</span> <span class=err>::</span> <span class=s2>&quot;unmarshal&quot;</span> <span class=err>|</span> <span class=s2>&quot;marshal&quot;</span>
</code></pre></div> </div> </div> <h2 id=reference>Reference<a class=headerlink href=#reference title="Permanent link">&para;</a></h2> <ul> <li><a href=https://cuelang.org/docs/references/spec/ >Cue Language Specification</a></li> <li><a href=https://cuelang.org/docs/tutorials/ >Cue Language Tutorials</a></li> </ul> <details class=tip open=open><summary>Need help?</summary><ul> <li>Post your question on these Slack channels:</li> <li>Dev Go Talk @ <code>#dev-go-talk</code></li> </ul> <p><strong>Did you find this page useful?</strong></p> <p><img alt=😍 class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/1f60d.svg title=:heart_eyes:> <a href=https://forms.gle/bMu4PvHKzS2JqcVN9><strong>Yes!</strong></a></p> <p><img alt=😢 class=twemoji src=https://twemoji.maxcdn.com/v/latest/svg/1f622.svg title=:cry:> <a href=https://forms.gle/UvsrHfZBevR2rSP36><strong>No</strong></a></p> </details> <p><strong>Maintained by:</strong> Kelvin Spencer</p> <div class=footnote> <hr> <ol> <li id=fn:1> <p><strong>commutative</strong>: <code>a</code> x <code>b</code> = <code>b</code> x <code>a</code> ; <code>a</code> + <code>b</code> = <code>b</code> + <code>a</code>&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a><a class=footnote-backref href=#fnref2:1 title="Jump back to footnote 1 in the text">&#8617;</a><a class=footnote-backref href=#fnref3:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:2> <p><strong>associative</strong>: (<code>a</code> + <code>b</code>) + <code>c</code> = <code>a</code> + (<code>b</code> + <code>c</code>) ; (<code>a</code> x <code>b</code>) x <code>c</code> = <code>a</code> x (<code>b</code> x <code>c</code>)&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 2 in the text">&#8617;</a><a class=footnote-backref href=#fnref2:2 title="Jump back to footnote 2 in the text">&#8617;</a><a class=footnote-backref href=#fnref3:2 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> <li id=fn:3> <p><strong>idempotent</strong>: <code>a</code> | <code>a</code> = <code>a</code>; <code>b</code> | <code>b</code> | <code>b</code> = <code>b</code>&#160;<a class=footnote-backref href=#fnref:3 title="Jump back to footnote 3 in the text">&#8617;</a></p> </li> </ol> </div> <hr> <div class=md-source-date> <small> Last update: June 3, 2020 </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../using-go-modules/ title="Go Modules" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Go Modules </div> </div> </a> <a href=../authoring-schemas-with-avro-idl/ title="Avro IDL" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Avro IDL </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2019 - 2020 Kelvin Spencer </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <script src=../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../assets/javascripts/bundle.5f27aba8.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "..",
          features: ["instant", "tabs"],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>